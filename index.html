<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Warteschlange in der Arztpraxis</title>
  <style>
    :root {
      --bg: #0f172a; --card: #111827; --muted: #94a3b8; --text: #e5e7eb;
      --accent: #22c55e; --warn: #f59e0b; --danger: #ef4444; --soft: #1f2937; --border: #374151;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    .wrap{max-width:900px;margin:24px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 16px;text-align:center}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 8px 20px rgb(0 0 0 / 0.35)}
    .muted{color:var(--muted)}
    .hint{margin:12px 0 0;font-size:13px;color:#cbd5e1}

    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    input,button{border-radius:12px;border:1px solid var(--border);background:var(--soft);color:var(--text)}
    input{padding:10px 12px;flex:1}
    button{padding:10px 14px;cursor:pointer;border:1px solid transparent}
    button.primary{background:var(--accent);color:#052e16}
    button.danger{background:var(--danger)}
    button.ghost{background:transparent;border-color:var(--border)}

    .queue{display:flex;gap:10px;align-items:flex-end;min-height:96px;padding:12px;border:1px dashed var(--border);border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01))}
    .box{position:relative;min-width:92px;max-width:140px;flex:0 0 auto;padding:10px 12px;border:1px solid var(--border);background:#0b1220;border-radius:14px;text-align:center;transition:transform .28s ease, opacity .28s ease}
    .box.new{transform:translateY(-6px)}
    .badge{position:absolute;top:-10px;left:-10px;background:var(--soft);border:1px solid var(--border);color:var(--muted);font-size:10px;padding:2px 6px;border-radius:999px}
    .marker{font-size:12px;color:var(--muted);margin:0 6px}

    .log{height:180px;overflow:auto;background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace;font-size:12px;margin-top:12px}
    .log p{margin:4px 0}

    @media (max-width: 600px){ .wrap{max-width:100%} }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Warteschlange in der Arztpraxis</h1>

    <div class="card">
      <div class="queue" id="queue"></div>
      <p class="hint">Hinweis: <strong>Bearbeite mit Hilfe dieses Programms die Aufgaben auf dem Arbeitsblatt.</strong></p>

      <div class="row">
        <input id="itemInput" placeholder="ContentType pContent" aria-label="Parameter für enqueue" />
        <button class="primary" id="addBtn">enqueue</button>
        <button class="danger" id="deqBtn">dequeue</button>
        <button id="frontBtn" class="ghost">front</button>
        <button id="emptyBtn" class="ghost">isEmpty</button>
      </div>

      <div class="log" id="log" aria-live="polite"></div>
    </div>
  </div>

  <script>
    const firstNames = ["Anna","Ben","Clara","David","Emma","Felix","Greta","Henry","Isabel","Jonas"];
    const lastNames  = ["Müller","Schmidt","Schneider","Fischer","Weber","Meyer","Wagner","Becker","Hoffmann","Schäfer"];

    const state = { arr: [] };
    const $ = sel => document.querySelector(sel);
    const logEl = $('#log');

    function log(msg){
      const p=document.createElement('p');
      const t=new Date().toLocaleTimeString();
      p.textContent=`[${t}] ${msg}`;
      logEl.appendChild(p);
      logEl.scrollTop=logEl.scrollHeight;
    }

    function render(){
      const q=$('#queue');
      q.innerHTML='';
      if(state.arr.length===0){
        q.innerHTML='<span class="small">Kein Patient in der Warteschlange</span>';
      } else {
        state.arr.forEach((val,i)=>{
          const div=document.createElement('div');
          div.className='box';
          div.innerHTML=`<div class="badge">${i===0?'H':'#'+(i+1)}</div>${val}`;
          q.appendChild(div);
        });
        const marker=document.createElement('span');
        marker.className='marker';
        marker.textContent='[T]';
        q.appendChild(marker);
      }
    }

    function randomPatient(){
      const first=firstNames[Math.floor(Math.random()*firstNames.length)];
      const last =lastNames[Math.floor(Math.random()*lastNames.length)];
      return `${first} ${last}`;
    }

    function enqueue(val){
      const v=(val && val.trim());
      if(!v){
        // log('ERROR: Kein Parameter angegeben (enqueue abgebrochen)');
        // console.error('enqueue(): Kein Parameter angegeben – kein Einfügen in die Queue.');
        return;
      }
      state.arr.push(v);
      log(`enqueue( ${v} )`);
      render();
      animateNew();
    }

    function dequeue(){
      if(state.arr.length===0){
        // log('⚠️ Queue ist leer.');
        return;
      }
      const v=state.arr.shift();
      log(`dequeue()`);
      render();
    }

    function isEmpty(){
      log(state.arr.length===0 ? 'isEmpty(): true' : 'isEmpty(): false');
    }

    function front(){
      if(state.arr.length===0){
        log('front(): null');
        return;
      }
      log(`front(): ${state.arr[0]}`);
    }

    function animateNew(){
      const q=$('#queue');
      const boxes=q.querySelectorAll('.box');
      const last=boxes[boxes.length-1];
      if(last){
        last.classList.add('new');
        setTimeout(()=> last.classList.remove('new'), 280);
      }
    }

    $('#addBtn').onclick  = () => enqueue($('#itemInput').value);
    $('#deqBtn').onclick  = () => dequeue();
    $('#emptyBtn').onclick= () => isEmpty();
    $('#frontBtn').onclick= () => front();

    function seedQueue(){ for(let i=0;i<3;i++) enqueue(randomPatient()); }

    // initial befüllen
    seedQueue();
  </script>
</body>
</html>
